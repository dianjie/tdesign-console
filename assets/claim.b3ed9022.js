import{d as P,aO as j,r as g,a as H,c as J,e as s,aE as G,f as m,i as d,l as e,w as t,j as n,p as u,n as Q,J as D,t as W,q as X,V as Y,M as Z,aF as ee,_ as te}from"./index.ec7ccd34.js";import{u as ae}from"./useDesign.9d0ca2bc.js";import{u as oe}from"./useSetting.1ce39974.js";import{u as ne}from"./useRequset.6e7c583c.js";import{g as se,f as le}from"./flowHelper.982d6905.js";import{a as ie,b as ue}from"./work.bc615081.js";import{F as ce}from"./index.fd52259b.js";import{u as C}from"./index.6fae05ac.js";import"./flow.775cb724.js";const re=[{colKey:"serial-number",title:"\u5E8F\u53F7",width:80,align:"center",fixed:"left"},{title:"\u6D41\u7A0B\u5206\u7C7B",colKey:"categoryName"},{title:"\u6D41\u7A0B\u540D\u79F0",colKey:"processDefinitionName"},{title:"\u5F53\u524D\u6B65\u9AA4",colKey:"taskName"},{title:"\u6D41\u7A0B\u7248\u672C",colKey:"processDefinitionVersion"},{title:"\u7533\u8BF7\u65F6\u95F4",colKey:"createTime"},{fixed:"right",width:200,colKey:"op",title:"\u64CD\u4F5C",align:"center"}],me={class:"table-wrapper"},de=["onClick"],pe=["onClick"],fe=["onClick"],_e=P({__name:"claim",setup(ge){const{tableVar:k}=ae(),{getTableHeaderAffixedTop:V,getLayoutContainer:A}=oe(),E={category:"",processDefinitionName:""},v=j(),l=g({...E}),x=v.getFlowDict,{fetchData:N,data:S,pagination:p,dataLoading:K}=ne(ie,l.value,ee),y=()=>{N({...l.value,category:se(l.value.category)})};H(()=>{y()});const c=C(()=>{y()},300),I=a=>{p.value={...p.value,current:a.current||1,pageSize:a.pageSize},c()},f=g(!1),b=g({}),R=({row:a})=>{b.value=a,f.value=!0},T=J(),$=({row:a})=>{T.push({path:`/work/process/${le(v.getFlowRoutes,a.category)}/detail/${a.processInstanceId}/${a.businessId}`})},L=({row:a})=>{const i=Y.confirm({header:"\u63D0\u793A",theme:"info",body:"\u786E\u5B9A\u7B7E\u6536\u6B64\u4EFB\u52A1?",onConfirm:C(async()=>{await ue(a.taskId),Z.success("\u5220\u9664\u6210\u529F"),i.destroy(),c()},300)})};return(a,i)=>{const M=s("t-select"),h=s("t-form-item"),r=s("t-col"),U=s("t-input"),w=s("t-row"),F=s("t-button"),z=s("t-form"),O=s("t-tag"),q=s("t-table"),_=G("auth");return m(),d("div",{class:X(n(k))},[e(z,{ref:"form",data:l.value,"label-width":80,colon:"",style:{marginBottom:"8px"},onReset:n(c),onSubmit:n(c)},{default:t(()=>[e(w,null,{default:t(()=>[e(r,{span:10},{default:t(()=>[e(w,{gutter:[16,24]},{default:t(()=>[e(r,{span:4},{default:t(()=>[e(h,{label:"\u6D41\u7A0B\u5206\u7C7B",name:"category"},{default:t(()=>[e(M,{modelValue:l.value.category,"onUpdate:modelValue":i[0]||(i[0]=o=>l.value.category=o),options:n(x),keys:{value:"dictKey",label:"dictValue"},clearable:"",placeholder:"\u8BF7\u9009\u62E9\u6D41\u7A0B\u5206\u7C7B"},null,8,["modelValue","options"])]),_:1})]),_:1}),e(r,{span:4},{default:t(()=>[e(h,{label:"\u6D41\u7A0B\u540D\u79F0",name:"processDefinitionName"},{default:t(()=>[e(U,{modelValue:l.value.processDefinitionName,"onUpdate:modelValue":i[1]||(i[1]=o=>l.value.processDefinitionName=o),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6D41\u7A0B\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(r,{span:2,class:"operation-wrapper"},{default:t(()=>[e(F,{theme:"primary",type:"submit",style:{marginLeft:"8px"}},{default:t(()=>[u(" \u67E5\u8BE2 ")]),_:1}),e(F,{type:"reset",variant:"base",theme:"default"},{default:t(()=>[u(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1})]),_:1},8,["data","onReset","onSubmit"]),Q("div",me,[e(q,{data:n(S),columns:n(re),hover:!0,loading:n(K),pagination:n(p),"header-affixed-top":{offsetTop:n(V),container:n(A)},"vertical-align":"top","row-key":"id",bordered:"",stripe:"",onPageChange:I},{op:t(o=>[D((m(),d("a",{class:"t-button-link",onClick:B=>L(o)},[u("\u7B7E\u6536")],8,de)),[[_,"work_claim_sign"]]),D((m(),d("a",{class:"t-button-link",onClick:B=>$(o)},[u("\u8BE6\u60C5")],8,pe)),[[_,"work_claim_detail"]]),D((m(),d("a",{class:"t-button-link",onClick:B=>R(o)},[u("\u6D41\u7A0B\u56FE")],8,fe)),[[_,"work_claim_follow"]])]),processDefinitionVersion:t(({row:o})=>[e(O,{theme:"primary",variant:"light"},{default:t(()=>[u("v"+W(o.processDefinitionVersion),1)]),_:2},1024)]),_:1},8,["data","columns","loading","pagination","header-affixed-top"]),e(ce,{visible:f.value,"onUpdate:visible":i[2]||(i[2]=o=>f.value=o),"row-data":b.value,type:"diagram"},null,8,["visible","row-data"])])],2)}}}),ke=te(_e,[["__file","D:/Study/tdesign-console/src/views/work/claim.vue"]]);export{ke as default};
