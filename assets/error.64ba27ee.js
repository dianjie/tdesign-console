import{a1 as S,d as K,r as c,C as k,ax as H,av as B,e as s,f as U,g as R,w as t,m as $,l as e,q,j as m,_ as j,a as M,aG as P,i as h,p as C,n as G,J,aH as O}from"./index.c2521a03.js";import{u as Q}from"./useDesign.9d0ca2bc.js";import{u as W}from"./useSetting.65510119.js";import{u as X}from"./useRequset.5f7a0394.js";import{u as Y}from"./index.d71d3bee.js";const Z=(b,g,p)=>S.get({url:"/blade-log/error/list",params:{...p,current:b,size:g}},{joinTime:!1}),ee=b=>S.get({url:"/blade-log/error/detail",params:{id:b}}),te=K({__name:"DialogForm",props:{visible:{type:Boolean,default:!1},editId:{type:String,default:""},actionType:{type:String,default:""}},emits:["update:visible","update:editId","update:actionType"],setup(b,{emit:g}){const p=b,T={serviceId:"",serverHost:"",serverIp:"",env:"",method:"",requestUri:"",createTime:"",userAgent:"",params:"",stackTrace:""},E=c({}),f=k(()=>`${{view:"\u67E5\u770B",edit:"\u7F16\u8F91",add:"\u65B0\u589E"}[p.actionType]||""}\u9519\u8BEF\u65E5\u5FD7`),F=k(()=>({view:!0,edit:!1})[p.actionType]||!1),_=c(!1),l=c({...T}),D=c(null),w=c(!1),y=()=>{l.value={...T},B(()=>{g("update:editId",""),g("update:actionType","")})};return H(()=>_.value,v=>{g("update:visible",v)}),H(()=>p.visible,v=>{v&&p.editId&&B(()=>{ee(p.editId).then(a=>{l.value={...a}})}),B(()=>{var a;(a=D.value)==null||a.clearValidate()}),_.value=v}),(v,a)=>{const d=s("t-input"),r=s("t-form-item"),u=s("t-col"),n=s("t-textarea"),I=s("t-row"),A=s("t-form"),V=s("t-dialog");return U(),R(V,{visible:_.value,"onUpdate:visible":a[10]||(a[10]=o=>_.value=o),header:m(f),width:780,footer:!1,onClosed:y},{body:t(()=>[$(" \u8868\u5355\u5185\u5BB9 "),e(A,{ref_key:"form",ref:D,class:q({"xy-form__detail":b.actionType==="view"}),data:l.value,rules:E.value,"label-width":100,disabled:m(F)||w.value},{default:t(()=>[e(I,{gutter:[0,28]},{default:t(()=>[e(u,{span:6},{default:t(()=>[e(r,{label:"\u670D\u52A1id",name:"serviceId"},{default:t(()=>[e(d,{modelValue:l.value.serviceId,"onUpdate:modelValue":a[0]||(a[0]=o=>l.value.serviceId=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:6},{default:t(()=>[e(r,{label:"\u670D\u52A1host",name:"serverHost"},{default:t(()=>[e(d,{modelValue:l.value.serverHost,"onUpdate:modelValue":a[1]||(a[1]=o=>l.value.serverHost=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:6},{default:t(()=>[e(r,{label:"\u670D\u52A1ip",name:"serverIp"},{default:t(()=>[e(d,{modelValue:l.value.serverIp,"onUpdate:modelValue":a[2]||(a[2]=o=>l.value.serverIp=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:6},{default:t(()=>[e(r,{label:"\u8F6F\u4EF6\u73AF\u5883",name:"env"},{default:t(()=>[e(d,{modelValue:l.value.env,"onUpdate:modelValue":a[3]||(a[3]=o=>l.value.env=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:6},{default:t(()=>[e(r,{label:"\u8BF7\u6C42\u65B9\u6CD5",name:"method"},{default:t(()=>[e(d,{modelValue:l.value.method,"onUpdate:modelValue":a[4]||(a[4]=o=>l.value.method=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:6},{default:t(()=>[e(r,{label:"\u8BF7\u6C42\u63A5\u53E3",name:"requestUri"},{default:t(()=>[e(d,{modelValue:l.value.requestUri,"onUpdate:modelValue":a[5]||(a[5]=o=>l.value.requestUri=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:6},{default:t(()=>[e(r,{label:"\u65E5\u5FD7\u65F6\u95F4",name:"createTime"},{default:t(()=>[e(d,{modelValue:l.value.createTime,"onUpdate:modelValue":a[6]||(a[6]=o=>l.value.createTime=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(r,{label:"\u7528\u6237\u4EE3\u7406",name:"userAgent"},{default:t(()=>[e(n,{modelValue:l.value.userAgent,"onUpdate:modelValue":a[7]||(a[7]=o=>l.value.userAgent=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(r,{label:"\u8BF7\u6C42\u6570\u636E",name:"params"},{default:t(()=>[e(n,{modelValue:l.value.params,"onUpdate:modelValue":a[8]||(a[8]=o=>l.value.params=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(r,{label:"\u65E5\u5FD7\u6570\u636E",name:"stackTrace"},{default:t(()=>[e(n,{modelValue:l.value.stackTrace,"onUpdate:modelValue":a[9]||(a[9]=o=>l.value.stackTrace=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["class","data","rules","disabled"])]),_:1},8,["visible","header"])}}}),ae=j(te,[["__file","D:/Study/tdesign-console/src/viewsBusiness/monitor/log/components/error/DialogForm.vue"]]),le=[{colKey:"serial-number",title:"\u5E8F\u53F7",width:80,align:"center",fixed:"left"},{title:"\u670D\u52A1id",colKey:"serviceId"},{title:"\u670D\u52A1host",colKey:"serverHost"},{title:"\u670D\u52A1ip",colKey:"serverIp"},{title:"\u8F6F\u4EF6\u73AF\u5883",colKey:"env"},{title:"\u8BF7\u6C42\u65B9\u6CD5",colKey:"method"},{title:"\u8BF7\u6C42\u63A5\u53E3",colKey:"requestUri"},{title:"\u65E5\u5FD7\u65F6\u95F4",colKey:"createTime"},{fixed:"right",width:80,colKey:"op",title:"\u64CD\u4F5C",align:"center"}],oe={class:"table-wrapper"},ue=["onClick"],ne=K({__name:"error",setup(b){const{tableVar:g}=Q(),{getTableHeaderAffixedTop:p,getLayoutContainer:T}=W(),f=c({...{serviceId:"",serverHost:""}}),F=c(!1),_=c(""),l=c(""),{fetchData:D,data:w,pagination:y,dataLoading:v}=X(Z,f.value,O);M(()=>{D()});const a=({row:u},n)=>{_.value=u.id,l.value=n,F.value=!0},d=Y(()=>{D()},300),r=u=>{y.value={...y.value,current:u.current||1,pageSize:u.pageSize},d()};return(u,n)=>{const I=s("t-input"),A=s("t-form-item"),V=s("t-col"),o=s("t-row"),x=s("t-button"),L=s("t-form"),N=s("t-table"),z=P("auth");return U(),h("div",{class:q(m(g))},[e(L,{ref:"form",data:f.value,"label-width":80,colon:"",style:{marginBottom:"8px"},onReset:m(d),onSubmit:m(d)},{default:t(()=>[e(o,null,{default:t(()=>[e(V,{span:10},{default:t(()=>[e(o,{gutter:[16,24]},{default:t(()=>[e(V,{span:4},{default:t(()=>[e(A,{label:"\u670D\u52A1id",name:"serviceId"},{default:t(()=>[e(I,{modelValue:f.value.serviceId,"onUpdate:modelValue":n[0]||(n[0]=i=>f.value.serviceId=i),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1id"},null,8,["modelValue"])]),_:1})]),_:1}),e(V,{span:4},{default:t(()=>[e(A,{label:"\u670D\u52A1host",name:"serverHost"},{default:t(()=>[e(I,{modelValue:f.value.serverHost,"onUpdate:modelValue":n[1]||(n[1]=i=>f.value.serverHost=i),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1host"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(V,{span:2,class:"operation-wrapper"},{default:t(()=>[e(x,{theme:"primary",type:"submit",style:{marginLeft:"8px"}},{default:t(()=>[C(" \u67E5\u8BE2 ")]),_:1}),e(x,{type:"reset",variant:"base",theme:"default"},{default:t(()=>[C(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1})]),_:1},8,["data","onReset","onSubmit"]),G("div",oe,[e(N,{data:m(w),columns:m(le),hover:!0,loading:m(v),pagination:m(y),"header-affixed-top":{offsetTop:m(p),container:m(T)},"vertical-align":"top","row-key":"id",bordered:"",stripe:"",onPageChange:r},{op:t(i=>[J((U(),h("a",{class:"t-button-link",onClick:se=>a(i,"view")},[C("\u67E5\u770B")],8,ue)),[[z,"log_error_view"]])]),_:1},8,["data","columns","loading","pagination","header-affixed-top"]),e(ae,{visible:F.value,"onUpdate:visible":n[2]||(n[2]=i=>F.value=i),editId:_.value,"onUpdate:editId":n[3]||(n[3]=i=>_.value=i),actionType:l.value,"onUpdate:actionType":n[4]||(n[4]=i=>l.value=i)},null,8,["visible","editId","actionType"])])],2)}}}),ve=j(ne,[["__file","D:/Study/tdesign-console/src/views/monitor/log/error.vue"]]);export{ve as default};
