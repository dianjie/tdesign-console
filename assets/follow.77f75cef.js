import{d as T,r as m,a as M,e as n,aG as N,f as F,i as B,l as e,w as t,p as f,j as l,n as z,J as q,t as H,q as j,V as G,M as J,aH as O,_ as $}from"./index.8ed3877a.js";import{u as Q}from"./useDesign.9d0ca2bc.js";import{u as W}from"./useSetting.01b849d1.js";import{u as X}from"./useRequset.50973ce5.js";import{f as Y,a as Z}from"./flow.efe49ab3.js";import{u as C}from"./index.74383c1c.js";const ee=[{colKey:"serial-number",title:"\u5E8F\u53F7",width:80,align:"center",fixed:"left"},{title:"\u6267\u884Cid",colKey:"executionId"},{title:"\u6D41\u7A0Bkey",colKey:"processDefinitionKey"},{title:"\u5B9E\u4F8Bid",colKey:"processInstanceId"},{title:"\u72B6\u6001",colKey:"suspensionState"},{title:"\u53D1\u8D77\u4EBA",colKey:"startUser"},{title:"\u5F00\u59CB\u65F6\u95F4",colKey:"startTime"},{fixed:"right",width:100,colKey:"op",title:"\u64CD\u4F5C",align:"center"}],te={class:"table-wrapper"},oe=["onClick"],ae=T({__name:"follow",setup(ne){const{tableVar:I}=Q(),{getTableHeaderAffixedTop:h,getLayoutContainer:w}=W(),u=m({...{executionId:"",processDefinitionKey:"",processInstanceId:""}}),r=m(!1),{fetchData:b,data:V,pagination:_,dataLoading:x}=X(Y,u.value,O);M(()=>{b()});const d=C(()=>{b()},300),E=s=>{_.value={..._.value,current:s.current||1,pageSize:s.pageSize},d()},v=m(""),c=m(""),K=({row:s})=>{v.value=s.processInstanceId,r.value=!0},S=()=>{const s=G.confirm({header:"\u63D0\u793A",theme:"warning",body:"\u786E\u5B9A\u5C06\u9009\u62E9\u6570\u636E\u5220\u9664?",onConfirm:C(async()=>{await Z({deleteReason:c.value,processInstanceId:v.value}),r.value=!1,J.success("\u5220\u9664\u6210\u529F"),s.destroy(),d()},300)})},k=()=>{c.value="",v.value=""};return(s,a)=>{const p=n("t-input"),g=n("t-form-item"),i=n("t-col"),y=n("t-row"),D=n("t-button"),A=n("t-form"),U=n("t-tag"),L=n("t-table"),P=n("t-dialog"),R=N("auth");return F(),B("div",{class:j(l(I))},[e(A,{ref:"form",data:u.value,"label-width":80,colon:"",style:{marginBottom:"8px"},onReset:l(d),onSubmit:l(d)},{default:t(()=>[e(y,null,{default:t(()=>[e(i,{span:10},{default:t(()=>[e(y,{gutter:[16,24]},{default:t(()=>[e(i,{span:4},{default:t(()=>[e(g,{label:"\u6267\u884Cid",name:"executionId"},{default:t(()=>[e(p,{modelValue:u.value.executionId,"onUpdate:modelValue":a[0]||(a[0]=o=>u.value.executionId=o),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6267\u884Cid"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:4},{default:t(()=>[e(g,{label:"\u6D41\u7A0Bkey",name:"processDefinitionKey"},{default:t(()=>[e(p,{modelValue:u.value.processDefinitionKey,"onUpdate:modelValue":a[1]||(a[1]=o=>u.value.processDefinitionKey=o),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6D41\u7A0Bkey"},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:4},{default:t(()=>[e(g,{label:"\u5B9E\u4F8Bid",name:"processInstanceId"},{default:t(()=>[e(p,{modelValue:u.value.processInstanceId,"onUpdate:modelValue":a[2]||(a[2]=o=>u.value.processInstanceId=o),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u5B9E\u4F8Bid"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(i,{span:2,class:"operation-wrapper"},{default:t(()=>[e(D,{theme:"primary",type:"submit",style:{marginLeft:"8px"}},{default:t(()=>[f(" \u67E5\u8BE2 ")]),_:1}),e(D,{type:"reset",variant:"base",theme:"default"},{default:t(()=>[f(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1})]),_:1},8,["data","onReset","onSubmit"]),z("div",te,[e(L,{data:l(V),columns:l(ee),hover:!0,loading:l(x),pagination:l(_),"header-affixed-top":{offsetTop:l(h),container:l(w)},"vertical-align":"top","row-key":"id",bordered:"",stripe:"",onPageChange:E},{op:t(o=>[q((F(),B("a",{class:"t-button-link",onClick:ue=>K(o)},[f("\u5220\u9664")],8,oe)),[[R,"flow_follow_delete"]])]),suspensionState:t(({row:o})=>[e(U,null,{default:t(()=>[f(H(o.suspensionState===1?"\u6FC0\u6D3B":"\u6302\u8D77"),1)]),_:2},1024)]),_:1},8,["data","columns","loading","pagination","header-affixed-top"]),e(P,{visible:r.value,"onUpdate:visible":a[4]||(a[4]=o=>r.value=o),header:"\u6D41\u7A0B\u5220\u9664",onConfirm:S,onClosed:k},{body:t(()=>[e(p,{modelValue:c.value,"onUpdate:modelValue":a[3]||(a[3]=o=>c.value=o),label:"\u5220\u9664\u539F\u56E0\uFF1A",placeholder:"\u8BF7\u8F93\u5165\u5220\u9664\u539F\u56E0",clearable:""},null,8,["modelValue"])]),_:1},8,["visible"])])],2)}}}),me=$(ae,[["__file","D:/Study/tdesign-console/src/views/flow/follow.vue"]]);export{me as default};
