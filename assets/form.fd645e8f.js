import{d as x,r as d,a2 as C,c as I,a3 as R,X as S,a4 as q,e as s,f as N,i as M,l as e,w as t,j as m,p as j,q as L,n as P,M as b,_ as z}from"./index.8ed3877a.js";import{d as F}from"./dayjs.min.5a105466.js";import{u as O}from"./useDesign.9d0ca2bc.js";import{l as X}from"./leave.7b34ae02.js";import{u as B}from"./index.74383c1c.js";const G=P("p",{class:"form__title"},"\u53D1\u8D77\u8BF7\u5047",-1),H=x({__name:"form",setup(J){const{tableVar:g}=O(),v={taskUser:"",startTime:"",endTime:"",reason:""},V=d({taskUser:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BA1\u6279\u4EBA\u5458",type:"error",trigger:"change"}],startTime:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4",type:"error",trigger:"change"}],endTime:[{required:!0,message:"\u8BF7\u9009\u62E9\u7ED3\u675F\u65F6\u95F4",type:"error",trigger:"change"}],reason:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BF7\u5047\u7406\u7531",type:"error",trigger:"blur"}]}),u=d({...v}),p=d([]),i=d(!1),c=C(),h=I(),_=R(),{tabRouters:D}=_;S(()=>{q().then(o=>{p.value=o})});const T=B(()=>{const o=D.findIndex(a=>a.path===c.path);_.subtractCurrentTabRouter({path:c.path,routeIdx:o}),h.replace({path:"/work/start"})},300),y=B(({firstError:o})=>{if(o)b.warning(o);else{i.value=!0;const a={processDefinitionId:c.params.processDefinitionId,...u.value};X(a).then(()=>{b.success("\u63D0\u4EA4\u6210\u529F"),T()}).finally(()=>{i.value=!1})}},300);return(o,a)=>{const E=s("t-select"),r=s("t-form-item"),n=s("t-col"),f=s("t-date-picker"),k=s("t-textarea"),w=s("t-button"),A=s("t-row"),U=s("t-form");return N(),M("div",{class:L(m(g))},[G,e(U,{ref:"form",data:u.value,"label-width":80,disabled:i.value,rules:V.value,onSubmit:m(y)},{default:t(()=>[e(A,{gutter:[0,28]},{default:t(()=>[e(n,{span:12},{default:t(()=>[e(r,{label:"\u5BA1\u6279\u4EBA\u5458",name:"taskUser"},{default:t(()=>[e(E,{modelValue:u.value.taskUser,"onUpdate:modelValue":a[0]||(a[0]=l=>u.value.taskUser=l),options:p.value,keys:{value:"id",label:"account"},clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5BA1\u6279\u4EBA\u5458"},null,8,["modelValue","options"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(r,{label:"\u5F00\u59CB\u65F6\u95F4",name:"startTime"},{default:t(()=>[e(f,{modelValue:u.value.startTime,"onUpdate:modelValue":a[1]||(a[1]=l=>u.value.startTime=l),"disable-date":{before:m(F)().subtract(1,"day").format()},"enable-time-picker":"","allow-input":"",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4",style:{width:"100%"}},null,8,["modelValue","disable-date"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(r,{label:"\u7ED3\u675F\u65F6\u95F4",name:"endTime"},{default:t(()=>[e(f,{modelValue:u.value.endTime,"onUpdate:modelValue":a[2]||(a[2]=l=>u.value.endTime=l),"disable-date":{before:m(F)().subtract(1,"day").format()},"enable-time-picker":"","allow-input":"",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u7ED3\u675F\u65F6\u95F4",style:{width:"100%"}},null,8,["modelValue","disable-date"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(r,{label:"\u8BF7\u5047\u7406\u7531",name:"reason"},{default:t(()=>[e(k,{modelValue:u.value.reason,"onUpdate:modelValue":a[3]||(a[3]=l=>u.value.reason=l),placeholder:"\u8BF7\u8F93\u5165\u8BF7\u5047\u7406\u7531"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:t(()=>[e(r,null,{default:t(()=>[e(w,{theme:"primary",type:"submit"},{default:t(()=>[j("\u63D0\u4EA4")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["data","disabled","rules","onSubmit"])],2)}}}),$=z(H,[["__file","D:/Study/tdesign-console/src/views/process/leave/form.vue"]]);export{$ as default};
