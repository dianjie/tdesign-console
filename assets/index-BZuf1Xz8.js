import{aD as F,aE as C,aF as V,aG as K,aH as X,aI as G,aJ as J,aK as B,i as O,j as Y,d as T,f as b,u as x,J as S,a2 as j,r as z,o as _,c as w,a as M,w as Z,e as Q,s as R,b as g,a4 as v,_ as L,l as ee,P as te,aL as ne,F as I,K as re,W as se,X as oe,m as ae,p as H}from"./index-CqGaQ7t4.js";import{u as ce}from"./useDesign-CbWcZHFZ.js";function ie(){}var ue=1/0,me=F&&1/C(new F([,-0]))[1]==ue?function(e){return new F(e)}:ie,le=200;function de(e,n,o){var a=-1,u=K,c=e.length,m=!0,r=[],l=r;if(o)m=!1,u=X;else if(c>=le){var s=n?null:me(e);if(s)return C(s);m=!1,u=G,l=new V}else l=n?[]:r;e:for(;++a<c;){var t=e[a],i=n?n(t):t;if(t=o||t!==0?t:0,m&&i===i){for(var p=l.length;p--;)if(l[p]===i)continue e;n&&l.push(i),r.push(t)}else u(l,i,o)||(l!==r&&l.push(i),r.push(t))}return r}function fe(e,n){return e&&e.length?de(e,J(n)):[]}function he(e,n,o=150){const a=B(e,o),u=()=>{n&&n.immediate&&e(),window.addEventListener("resize",a)},c=()=>{window.removeEventListener("resize",a)};return O(()=>{u()}),Y(()=>{c()}),[u,c]}const ge=["src"],pe=T({__name:"FrameContent",props:{frameSrc:String},setup(e){const n=b(!0),o=b(window.innerHeight),a=b(),{prefixCls:u}=ce("iframe-page"),c=x(),m=S(()=>({height:`${g(o)}px`})),r=getComputedStyle(document.documentElement),l=r.getPropertyValue("--td-comp-size-xxxl"),s=r.getPropertyValue("--td-comp-paddingTB-xxl");function t(d){let f=d.clientHeight;const h=window.getComputedStyle(d);return f+=parseInt(h.marginTop,10),f+=parseInt(h.marginBottom,10),f+=parseInt(h.borderTopWidth,10),f+=parseInt(h.borderBottomWidth,10),f}function i(){const d=g(a);if(!d)return;let f=0;const{showFooter:h,isUseTabsRouter:P,showBreadcrumb:$}=c,E=parseFloat(l),k=document.querySelector(".t-tabs__nav"),A=P?t(k):0,D=document.querySelector(".t-breadcrumb"),W=$?t(D):0,q=parseFloat(s)*2,N=document.querySelector(".t-layout__footer"),U=h?t(N):0,y=E+A+W+q+U+2;o.value=window.innerHeight-y,f=document.documentElement.clientHeight-y,d.style.height=`${f}px`}function p(){n.value=!1,i()}return he(i,{immediate:!0}),j([()=>c.showFooter,()=>c.isUseTabsRouter,()=>c.showBreadcrumb],B(i,250)),(d,f)=>{const h=z("t-loading");return _(),w("div",{class:R(g(u)),style:v(m.value)},[M(h,{loading:n.value,size:"large",style:v(m.value)},{default:Z(()=>[Q("iframe",{ref_key:"frameRef",ref:a,src:e.frameSrc,class:R(`${g(u)}__main`),onLoad:p},null,42,ge)]),_:1},8,["loading","style"])],6)}}}),_e=L(pe,[["__scopeId","data-v-fe38759a"]]);function we(){const e=ee(),{currentRoute:n}=e,{isUseTabsRouter:o}=x(),a=te(),u=S(()=>m(ne(e.getRoutes()))||[]),c=S(()=>a.tabRouters.reduce((s,t)=>(t.meta&&Reflect.has(t.meta,"frameSrc")&&s.push(t.name),s),[]));function m(s){let t=[];for(const i of s){const{meta:{frameSrc:p}={},children:d}=i;p&&t.push(i),d&&d.length&&t.push(...m(d))}return t=fe(t,"name"),t}function r(s){return s.name===g(n).name}function l(s){return g(o)?g(c).includes(s):e.currentRoute.value.name===s}return{hasRenderFrame:l,getFramePages:u,showIframe:r,getAllFramePages:m}}const Se=T({name:"FrameLayout",components:{FrameContent:_e},setup(){const{getFramePages:e,hasRenderFrame:n,showIframe:o}=we(),a=S(()=>g(e).length>0);return{getFramePages:e,hasRenderFrame:n,showIframe:o,showFrame:a}}}),Fe={key:0};function be(e,n,o,a,u,c){const m=z("frame-content");return e.showFrame?(_(),w("div",Fe,[(_(!0),w(I,null,re(e.getFramePages,r=>(_(),w(I,{key:r.path},[e.hasRenderFrame(r.name)?se((_(),ae(m,{key:0,"frame-src":r.meta.frameSrc},null,8,["frame-src"])),[[oe,e.showIframe(r)]]):H("",!0)],64))),128))])):H("",!0)}const ve=L(Se,[["render",be]]);export{ve as F};
