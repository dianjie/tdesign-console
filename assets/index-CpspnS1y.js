import{O as W,aI as N,aJ as H,j as O,k as A,d as x,g as b,u as C,R as _,a3 as K,r as I,o as h,c as p,a as X,w as j,e as J,v as y,b as f,aK as v,f as z,m as M,W as G,aL as Q,F as R,S as Y,a0 as Z,a1 as ee,n as te,q as B}from"./index-C3aixgX8.js";import{u as ne}from"./useDesign-CbWcZHFZ.js";function oe(e,n){return e&&e.length?W(e,N(n)):[]}function re(e,n,c=150){const r=H(e,c),m=()=>{n&&n.immediate&&e(),window.addEventListener("resize",r)},a=()=>{window.removeEventListener("resize",r)};return O(()=>{m()}),A(()=>{a()}),[m,a]}const ae=["src"],se=x({__name:"FrameContent",props:{frameSrc:String},setup(e){const n=b(!0),c=b(window.innerHeight),r=b(),{prefixCls:m}=ne("iframe-page"),a=C(),d=_(()=>({height:`${f(c)}px`})),i=getComputedStyle(document.documentElement),w=i.getPropertyValue("--td-comp-size-xxxl"),o=i.getPropertyValue("--td-comp-paddingTB-xxl");function t(s){let u=s.clientHeight;const l=window.getComputedStyle(s);return u+=parseInt(l.marginTop,10),u+=parseInt(l.marginBottom,10),u+=parseInt(l.borderTopWidth,10),u+=parseInt(l.borderBottomWidth,10),u}function g(){const s=f(r);if(!s)return;let u=0;const{showFooter:l,isUseTabsRouter:T,showBreadcrumb:$}=a,k=parseFloat(w),L=document.querySelector(".t-tabs__nav"),P=T?t(L):0,q=document.querySelector(".t-breadcrumb"),D=$?t(q):0,E=parseFloat(o)*2,U=document.querySelector(".t-layout__footer"),V=l?t(U):0,F=k+P+D+E+V+2;c.value=window.innerHeight-F,u=document.documentElement.clientHeight-F,s.style.height=`${u}px`}function S(){n.value=!1,g()}return re(g,{immediate:!0}),K([()=>a.showFooter,()=>a.isUseTabsRouter,()=>a.showBreadcrumb],H(g,250)),(s,u)=>{const l=I("t-loading");return h(),p("div",{class:y(f(m)),style:v(d.value)},[X(l,{loading:n.value,size:"large",style:v(d.value)},{default:j(()=>[J("iframe",{ref_key:"frameRef",ref:r,src:e.frameSrc,class:y(`${f(m)}__main`),onLoad:S},null,42,ae)]),_:1},8,["loading","style"])],6)}}}),ce=z(se,[["__scopeId","data-v-fe38759a"]]);function ie(){const e=M(),{currentRoute:n}=e,{isUseTabsRouter:c}=C(),r=G(),m=_(()=>d(Q(e.getRoutes()))||[]),a=_(()=>r.tabRouters.reduce((o,t)=>(t.meta&&Reflect.has(t.meta,"frameSrc")&&o.push(t.name),o),[]));function d(o){let t=[];for(const g of o){const{meta:{frameSrc:S}={},children:s}=g;S&&t.push(g),s&&s.length&&t.push(...d(s))}return t=oe(t,"name"),t}function i(o){return o.name===f(n).name}function w(o){return f(c)?f(a).includes(o):e.currentRoute.value.name===o}return{hasRenderFrame:w,getFramePages:m,showIframe:i,getAllFramePages:d}}const ue=x({name:"FrameLayout",components:{FrameContent:ce},setup(){const{getFramePages:e,hasRenderFrame:n,showIframe:c}=ie(),r=_(()=>f(e).length>0);return{getFramePages:e,hasRenderFrame:n,showIframe:c,showFrame:r}}}),me={key:0};function de(e,n,c,r,m,a){const d=I("frame-content");return e.showFrame?(h(),p("div",me,[(h(!0),p(R,null,Y(e.getFramePages,i=>(h(),p(R,{key:i.path},[e.hasRenderFrame(i.name)?Z((h(),te(d,{key:0,"frame-src":i.meta.frameSrc},null,8,["frame-src"])),[[ee,e.showIframe(i)]]):B("",!0)],64))),128))])):B("",!0)}const ge=z(ue,[["render",de]]);export{ge as F};
