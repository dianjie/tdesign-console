import{ay as V,ap as H,az as j,aj as X,aA as K,a as J,b as G,d as N,r as k,y as O,C as R,ax as Q,e as q,f as F,i as I,l as Y,w as Z,n as ee,q as L,j as _,D as z,_ as U,c as te,a3 as ne,aB as re,F as W,H as oe,J as ae,K as se,g as ie,m as D}from"./index.8ed3877a.js";import{u as ce}from"./useDesign.9d0ca2bc.js";var ue=/\s/;function me(e){for(var t=e.length;t--&&ue.test(e.charAt(t)););return t}var de=/^\s+/;function fe(e){return e&&e.slice(0,me(e)+1).replace(de,"")}var P=0/0,le=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,he=/^0o[0-7]+$/i,pe=parseInt;function A(e){if(typeof e=="number")return e;if(V(e))return P;if(H(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=H(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=fe(e);var o=ge.test(e);return o||he.test(e)?pe(e.slice(2),o?2:8):le.test(e)?P:+e}var _e=function(){return j.Date.now()};const E=_e;var ye="Expected a function",ve=Math.max,be=Math.min;function M(e,t,o){var s,m,c,u,n,l,a=0,i=!1,f=!1,y=!0;if(typeof e!="function")throw new TypeError(ye);t=A(t)||0,H(o)&&(i=!!o.leading,f="maxWait"in o,c=f?ve(A(o.maxWait)||0,t):c,y="trailing"in o?!!o.trailing:y);function d(r){var p=s,v=m;return s=m=void 0,a=r,u=e.apply(v,p),u}function g(r){return a=r,n=setTimeout(b,t),i?d(r):u}function h(r){var p=r-l,v=r-a,T=t-p;return f?be(T,c-v):T}function w(r){var p=r-l,v=r-a;return l===void 0||p>=t||p<0||f&&v>=c}function b(){var r=E();if(w(r))return x(r);n=setTimeout(b,h(r))}function x(r){return n=void 0,y&&s?d(r):(s=m=void 0,u)}function C(){n!==void 0&&clearTimeout(n),a=0,s=l=m=n=void 0}function B(){return n===void 0?u:x(E())}function S(){var r=E(),p=w(r);if(s=arguments,m=this,l=r,p){if(n===void 0)return g(l);if(f)return clearTimeout(n),n=setTimeout(b,t),d(l)}return n===void 0&&(n=setTimeout(b,t)),u}return S.cancel=C,S.flush=B,S}function Se(e,t){return e&&e.length?X(e,K(t)):[]}function Fe(e,t,o=150){const s=M(e,o),m=()=>{t&&t.immediate&&e(),window.addEventListener("resize",s)},c=()=>{window.removeEventListener("resize",s)};return J(()=>{m()}),G(()=>{c()}),[m,c]}const we=["src"],xe=N({__name:"FrameContent",props:{frameSrc:String},setup(e){const t=k(!0),o=k(window.innerHeight),s=k(),{prefixCls:m}=ce("iframe-page"),c=O(),u=R(()=>({height:`${_(o)}px`})),n=getComputedStyle(document.documentElement),l=n.getPropertyValue("--td-comp-size-xxxl"),a=n.getPropertyValue("--td-comp-paddingTB-xxl");function i(d){let g=d.clientHeight;const h=window.getComputedStyle(d);return g+=parseInt(h.marginTop,10),g+=parseInt(h.marginBottom,10),g+=parseInt(h.borderTopWidth,10),g+=parseInt(h.borderBottomWidth,10),g}function f(){const d=_(s);if(!d)return;let g=0;const{showFooter:h,isUseTabsRouter:w,showBreadcrumb:b}=c,x=parseFloat(l),C=document.querySelector(".t-tabs__nav"),B=w?i(C):0,S=document.querySelector(".t-breadcrumb"),r=b?i(S):0,p=parseFloat(a)*2,v=document.querySelector(".t-layout__footer"),T=h?i(v):0,$=x+B+r+p+T+2;o.value=window.innerHeight-$,g=document.documentElement.clientHeight-$,d.style.height=`${g}px`}function y(){t.value=!1,f()}return Fe(f,{immediate:!0}),Q([()=>c.showFooter,()=>c.isUseTabsRouter,()=>c.showBreadcrumb],M(f,250)),(d,g)=>{const h=q("t-loading");return F(),I("div",{class:L(_(m)),style:z(_(u))},[Y(h,{loading:t.value,size:"large",style:z(_(u))},{default:Z(()=>[ee("iframe",{ref_key:"frameRef",ref:s,src:e.frameSrc,class:L(`${_(m)}__main`),onLoad:y},null,42,we)]),_:1},8,["loading","style"])],6)}}});const Te=U(xe,[["__scopeId","data-v-80b9e6e7"],["__file","D:/Study/tdesign-console/src/layouts/components/FrameContent.vue"]]);function Ie(){const e=te(),{currentRoute:t}=e,{isUseTabsRouter:o}=O(),s=ne(),m=R(()=>u(re(e.getRoutes()))||[]),c=R(()=>s.tabRouters.reduce((a,i)=>(i.meta&&Reflect.has(i.meta,"frameSrc")&&a.push(i.name),a),[]));function u(a){let i=[];for(const f of a){const{meta:{frameSrc:y}={},children:d}=f;y&&i.push(f),d&&d.length&&i.push(...u(d))}return i=Se(i,"name"),i}function n(a){return a.name===_(t).name}function l(a){return _(o)?_(c).includes(a):e.currentRoute.value.name===a}return{hasRenderFrame:l,getFramePages:m,showIframe:n,getAllFramePages:u}}const Re=N({name:"FrameLayout",components:{FrameContent:Te},setup(){const{getFramePages:e,hasRenderFrame:t,showIframe:o}=Ie(),s=R(()=>_(e).length>0);return{getFramePages:e,hasRenderFrame:t,showIframe:o,showFrame:s}}}),Ce={key:0};function Be(e,t,o,s,m,c){const u=q("frame-content");return e.showFrame?(F(),I("div",Ce,[(F(!0),I(W,null,oe(e.getFramePages,n=>(F(),I(W,{key:n.path},[e.hasRenderFrame(n.name)?ae((F(),ie(u,{key:0,"frame-src":n.meta.frameSrc},null,8,["frame-src"])),[[se,e.showIframe(n)]]):D("v-if",!0)],64))),128))])):D("v-if",!0)}const He=U(Re,[["render",Be],["__file","D:/Study/tdesign-console/src/layouts/frame/index.vue"]]);export{He as F};
