import{d as M,aQ as O,r as m,a as j,c as G,e as s,aG as J,f,i as _,l as e,w as t,j as a,p as l,n as P,J as B,t as C,q as Q,aH as W,_ as X}from"./index.c2521a03.js";import{u as Y}from"./useDesign.9d0ca2bc.js";import{u as Z}from"./useSetting.65510119.js";import{u as ee}from"./useRequset.5f7a0394.js";import{g as te,f as oe}from"./flowHelper.b35783d2.js";import{s as ae}from"./work.85922f1d.js";import{F as ne}from"./index.515bd7c2.js";import{u as se}from"./index.d71d3bee.js";import"./flow.34ecd32e.js";const ie=[{colKey:"serial-number",title:"\u5E8F\u53F7",width:80,align:"center",fixed:"left"},{title:"\u6D41\u7A0B\u5206\u7C7B",colKey:"categoryName"},{title:"\u6D41\u7A0B\u540D\u79F0",colKey:"processDefinitionName"},{title:"\u5F53\u524D\u6B65\u9AA4",colKey:"taskName"},{title:"\u6D41\u7A0B\u7248\u672C",colKey:"processDefinitionVersion"},{title:"\u6D41\u7A0B\u8FDB\u5EA6",colKey:"processIsFinished"},{title:"\u7533\u8BF7\u65F6\u95F4",colKey:"createTime"},{fixed:"right",width:180,colKey:"op",title:"\u64CD\u4F5C",align:"center"}],ue={class:"table-wrapper"},le=["onClick"],re=["onClick"],ce=M({__name:"send",setup(de){const{tableVar:k}=Y(),{getTableHeaderAffixedTop:V,getLayoutContainer:A}=Z(),x={category:"",processDefinitionName:""},g=O(),i=m({...x}),N=g.getFlowDict,{fetchData:S,data:E,pagination:c,dataLoading:K}=ee(ae,i.value,W),D=()=>{S({...i.value,category:te(i.value.category)})};j(()=>{D()});const d=se(()=>{D()},300),I=n=>{c.value={...c.value,current:n.current||1,pageSize:n.pageSize},d()},p=m(!1),v=m({}),R=({row:n})=>{v.value=n,p.value=!0},L=G(),T=({row:n})=>{L.push({path:`/work/process/${oe(g.getFlowRoutes,n.category)}/detail/${n.processInstanceId}/${n.businessId}`})};return(n,u)=>{const $=s("t-select"),h=s("t-form-item"),r=s("t-col"),U=s("t-input"),y=s("t-row"),F=s("t-button"),z=s("t-form"),b=s("t-tag"),q=s("t-table"),w=J("auth");return f(),_("div",{class:Q(a(k))},[e(z,{ref:"form",data:i.value,"label-width":80,colon:"",style:{marginBottom:"8px"},onReset:a(d),onSubmit:a(d)},{default:t(()=>[e(y,null,{default:t(()=>[e(r,{span:10},{default:t(()=>[e(y,{gutter:[16,24]},{default:t(()=>[e(r,{span:4},{default:t(()=>[e(h,{label:"\u6D41\u7A0B\u5206\u7C7B",name:"category"},{default:t(()=>[e($,{modelValue:i.value.category,"onUpdate:modelValue":u[0]||(u[0]=o=>i.value.category=o),options:a(N),keys:{value:"dictKey",label:"dictValue"},clearable:"",placeholder:"\u8BF7\u9009\u62E9\u6D41\u7A0B\u5206\u7C7B"},null,8,["modelValue","options"])]),_:1})]),_:1}),e(r,{span:4},{default:t(()=>[e(h,{label:"\u6D41\u7A0B\u540D\u79F0",name:"processDefinitionName"},{default:t(()=>[e(U,{modelValue:i.value.processDefinitionName,"onUpdate:modelValue":u[1]||(u[1]=o=>i.value.processDefinitionName=o),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6D41\u7A0B\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(r,{span:2,class:"operation-wrapper"},{default:t(()=>[e(F,{theme:"primary",type:"submit",style:{marginLeft:"8px"}},{default:t(()=>[l(" \u67E5\u8BE2 ")]),_:1}),e(F,{type:"reset",variant:"base",theme:"default"},{default:t(()=>[l(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1})]),_:1},8,["data","onReset","onSubmit"]),P("div",ue,[e(q,{data:a(E),columns:a(ie),hover:!0,loading:a(K),pagination:a(c),"header-affixed-top":{offsetTop:a(V),container:a(A)},"vertical-align":"top","row-key":"id",bordered:"",stripe:"",onPageChange:I},{op:t(o=>[B((f(),_("a",{class:"t-button-link",onClick:H=>T(o)},[l("\u8BE6\u60C5")],8,le)),[[w,"work_send_detail"]]),B((f(),_("a",{class:"t-button-link",onClick:H=>R(o)},[l("\u6D41\u7A0B\u56FE")],8,re)),[[w,"work_send_follow"]])]),processDefinitionVersion:t(({row:o})=>[e(b,{theme:"primary",variant:"light"},{default:t(()=>[l("v"+C(o.processDefinitionVersion),1)]),_:2},1024)]),processIsFinished:t(({row:o})=>[e(b,{theme:"primary",variant:"light"},{default:t(()=>[l(C(o.processIsFinished==="finished"?"\u5DF2\u5B8C\u6210":"\u672A\u5B8C\u6210"),1)]),_:2},1024)]),_:1},8,["data","columns","loading","pagination","header-affixed-top"]),e(ne,{visible:p.value,"onUpdate:visible":u[2]||(u[2]=o=>p.value=o),"row-data":v.value,type:"diagram"},null,8,["visible","row-data"])])],2)}}}),Fe=X(ce,[["__file","D:/Study/tdesign-console/src/views/work/send.vue"]]);export{Fe as default};
