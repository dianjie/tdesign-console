import{d as G,aQ as J,r as d,a as P,c as Q,e as o,aG as W,f as v,i as y,l as t,w as e,j as n,p as u,n as X,J as A,t as D,q as Y,aH as Z,_ as ee}from"./index.8ed3877a.js";import{u as te}from"./useDesign.9d0ca2bc.js";import{u as ae}from"./useSetting.01b849d1.js";import{u as oe}from"./useRequset.50973ce5.js";import{g as ne,f as ue}from"./flowHelper.b40b68ad.js";import{e as le}from"./work.eedae2d5.js";import{F as se}from"./index.17cfff5a.js";import{u as re}from"./index.74383c1c.js";import"./flow.efe49ab3.js";const ie=[{colKey:"serial-number",title:"\u5E8F\u53F7",width:80,align:"center",fixed:"left"},{title:"\u79DF\u6237\u7F16\u53F7",colKey:"tenantId"},{title:"\u6D41\u7A0B\u5206\u7C7B",colKey:"categoryName"},{title:"\u6D41\u7A0B\u6807\u8BC6",colKey:"key"},{title:"\u6D41\u7A0B\u540D\u79F0",colKey:"name"},{title:"\u6D41\u7A0B\u7248\u672C",colKey:"version"},{title:"\u72B6\u6001",colKey:"suspensionState"},{title:"\u90E8\u7F72\u65F6\u95F4",colKey:"deploymentTime"},{fixed:"right",width:210,colKey:"op",title:"\u64CD\u4F5C",align:"center"}],ce={class:"table-wrapper"},de=["onClick"],me=["onClick"],pe=G({__name:"start",setup(_e){const{tableVar:V}=te(),{getTableHeaderAffixedTop:x,getLayoutContainer:S}=ae(),K={category:"",name:""},b=J(),l=d({...K}),E=b.getFlowDict,m=d("1"),{fetchData:R,data:I,pagination:p,dataLoading:L}=oe(le,l.value,Z),h=()=>{R({...l.value,category:ne(l.value.category),mode:m.value})};P(()=>{h()});const c=re(()=>{h()},300),N=s=>{p.value={...p.value,current:s.current||1,pageSize:s.pageSize},c()},_=d(!1),F=d({}),T=({row:s})=>{F.value=s,_.value=!0},U=Q(),$=({row:s})=>{U.push({path:`/work/process/${ue(b.getFlowRoutes,s.category)}/form/${s.id}`})};return(s,r)=>{const z=o("t-select"),w=o("t-form-item"),i=o("t-col"),j=o("t-input"),f=o("t-row"),B=o("t-button"),q=o("t-form"),C=o("t-radio-button"),H=o("t-radio-group"),g=o("t-tag"),M=o("t-table"),k=W("auth");return v(),y("div",{class:Y(n(V))},[t(q,{ref:"form",data:l.value,"label-width":80,colon:"",style:{marginBottom:"8px"},onReset:n(c),onSubmit:n(c)},{default:e(()=>[t(f,null,{default:e(()=>[t(i,{span:10},{default:e(()=>[t(f,{gutter:[16,24]},{default:e(()=>[t(i,{span:4},{default:e(()=>[t(w,{label:"\u6D41\u7A0B\u5206\u7C7B",name:"category"},{default:e(()=>[t(z,{modelValue:l.value.category,"onUpdate:modelValue":r[0]||(r[0]=a=>l.value.category=a),options:n(E),keys:{value:"dictKey",label:"dictValue"},clearable:"",placeholder:"\u8BF7\u9009\u62E9\u6D41\u7A0B\u5206\u7C7B"},null,8,["modelValue","options"])]),_:1})]),_:1}),t(i,{span:4},{default:e(()=>[t(w,{label:"\u6D41\u7A0B\u540D\u79F0",name:"name"},{default:e(()=>[t(j,{modelValue:l.value.name,"onUpdate:modelValue":r[1]||(r[1]=a=>l.value.name=a),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6D41\u7A0B\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(i,{span:2,class:"operation-wrapper"},{default:e(()=>[t(B,{theme:"primary",type:"submit",style:{marginLeft:"8px"}},{default:e(()=>[u(" \u67E5\u8BE2 ")]),_:1}),t(B,{type:"reset",variant:"base",theme:"default"},{default:e(()=>[u(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1})]),_:1},8,["data","onReset","onSubmit"]),X("div",ce,[t(M,{data:n(I),columns:n(ie),hover:!0,loading:n(L),pagination:n(p),"header-affixed-top":{offsetTop:n(x),container:n(S)},"vertical-align":"top","row-key":"id",bordered:"",stripe:"",onPageChange:N},{"top-content":e(()=>[t(f,{justify:"space-between",style:{"margin-bottom":"10px"}},{default:e(()=>[t(i,{flex:"0 0 auto"},{default:e(()=>[t(H,{modelValue:m.value,"onUpdate:modelValue":r[2]||(r[2]=a=>m.value=a),onChange:n(c)},{default:e(()=>[t(C,{value:"1"},{default:e(()=>[u("\u901A\u7528\u6D41\u7A0B")]),_:1}),t(C,{value:"2"},{default:e(()=>[u("\u5B9A\u5236\u6D41\u7A0B")]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1})]),_:1})]),op:e(a=>[A((v(),y("a",{class:"t-button-link",onClick:O=>$(a)},[u("\u53D1\u8D77")],8,de)),[[k,"work_start_flow"]]),A((v(),y("a",{class:"t-button-link",onClick:O=>T(a)},[u("\u6D41\u7A0B\u56FE")],8,me)),[[k,"work_start_image"]])]),tenantId:e(({row:a})=>[t(g,{theme:"primary",variant:"light"},{default:e(()=>[u(D(a.tenantId?a.tenantId:"\u901A\u7528"),1)]),_:2},1024)]),version:e(({row:a})=>[t(g,{theme:"primary",variant:"light"},{default:e(()=>[u("v"+D(a.version),1)]),_:2},1024)]),suspensionState:e(({row:a})=>[t(g,{theme:"primary",variant:"light"},{default:e(()=>[u(D(a.suspensionState===1?"\u6FC0\u6D3B":"\u6302\u8D77"),1)]),_:2},1024)]),_:1},8,["data","columns","loading","pagination","header-affixed-top"]),t(se,{visible:_.value,"onUpdate:visible":r[3]||(r[3]=a=>_.value=a),"row-data":F.value},null,8,["visible","row-data"])])],2)}}}),Be=ee(pe,[["__file","D:/Study/tdesign-console/src/views/work/start.vue"]]);export{Be as default};
