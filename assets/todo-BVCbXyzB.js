import{d as A,aH as E,g as v,j as W,m as G,r as s,ax as J,o as u,c as d,a as e,w as o,b as n,s as r,e as P,a0 as h,t as Q,v as X,ay as Y}from"./index-C3aixgX8.js";import{t as Z}from"./work-10cLSsRZ.js";import{_ as ee}from"./index.vue_vue_type_script_setup_true_lang-BDY8DIY-.js";import{u as te}from"./useSetting-oU45HIOI.js";import{u as oe}from"./useDesign-CbWcZHFZ.js";import{u as ae}from"./useRequset-DXnVyzrU.js";import{g as ne,f as x}from"./flowHelper-DDFyLbCI.js";import{u as se}from"./index-C0FKHvC_.js";import"./flow-BKWYNEiE.js";const le=[{colKey:"serial-number",title:"序号",width:80,align:"center",fixed:"left"},{title:"流程分类",colKey:"categoryName"},{title:"流程名称",colKey:"processDefinitionName"},{title:"当前步骤",colKey:"taskName"},{title:"流程版本",colKey:"processDefinitionVersion"},{title:"申请时间",colKey:"createTime"},{fixed:"right",width:200,colKey:"op",title:"操作",align:"center"}],ie={class:"table-wrapper"},re=["onClick"],ce=["onClick"],ue=["onClick"],we=A({__name:"todo",setup(de){const{tableVar:N}=oe(),{getTableHeaderAffixedTop:$,getLayoutContainer:F}=te(),S={category:"",processDefinitionName:""},p=E(),l=v({...S}),I=p.getFlowDict,{fetchData:K,data:R,pagination:m,dataLoading:L}=ae(Z,l.value,Y),b=()=>{K({...l.value,category:ne(l.value.category)})};W(()=>{b()});const f=se(()=>{b()},300),T=t=>{m.value={...m.value,current:t.current||1,pageSize:t.pageSize},f()},_=v(!1),y=v({}),B=({row:t})=>{y.value=t,_.value=!0},w=G(),U=({row:t})=>{w.push({path:`/work/process/${x(p.getFlowRoutes,t.category)}/handle/${t.taskId}/${t.processInstanceId}/${t.businessId}`})},z=({row:t})=>{w.push({path:`/work/process/${x(p.getFlowRoutes,t.category)}/detail/${t.processInstanceId}/${t.businessId}`})};return(t,i)=>{const H=s("t-select"),k=s("t-form-item"),c=s("t-col"),M=s("t-input"),D=s("t-row"),C=s("t-button"),O=s("t-form"),j=s("t-tag"),q=s("t-table"),g=J("auth");return u(),d("div",{class:X(n(N))},[e(O,{ref:"form",data:l.value,"label-width":80,colon:"",style:{marginBottom:"8px"},onReset:n(f),onSubmit:n(f)},{default:o(()=>[e(D,null,{default:o(()=>[e(c,{span:10},{default:o(()=>[e(D,{gutter:[16,24]},{default:o(()=>[e(c,{span:4},{default:o(()=>[e(k,{label:"流程分类",name:"category"},{default:o(()=>[e(H,{modelValue:l.value.category,"onUpdate:modelValue":i[0]||(i[0]=a=>l.value.category=a),options:n(I),keys:{value:"dictKey",label:"dictValue"},clearable:"",placeholder:"请选择流程分类"},null,8,["modelValue","options"])]),_:1})]),_:1}),e(c,{span:4},{default:o(()=>[e(k,{label:"流程名称",name:"processDefinitionName"},{default:o(()=>[e(M,{modelValue:l.value.processDefinitionName,"onUpdate:modelValue":i[1]||(i[1]=a=>l.value.processDefinitionName=a),clearable:"",placeholder:"请输入流程名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(c,{span:2,class:"operation-wrapper"},{default:o(()=>[e(C,{theme:"primary",type:"submit",style:{marginLeft:"8px"}},{default:o(()=>[r(" 查询 ")]),_:1}),e(C,{type:"reset",variant:"base",theme:"default"},{default:o(()=>[r(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["data","onReset","onSubmit"]),P("div",ie,[e(q,{data:n(R),columns:n(le),hover:!0,loading:n(L),pagination:n(m),"header-affixed-top":{offsetTop:n($),container:n(F)},"vertical-align":"top","row-key":"id",bordered:"",stripe:"",onPageChange:T},{op:o(a=>[h((u(),d("a",{class:"t-button-link",onClick:V=>U(a)},[r("处理")],8,re)),[[g,"work_todo_handle"]]),h((u(),d("a",{class:"t-button-link",onClick:V=>z(a)},[r("详情")],8,ce)),[[g,"work_todo_detail"]]),h((u(),d("a",{class:"t-button-link",onClick:V=>B(a)},[r("流程图")],8,ue)),[[g,"work_todo_follow"]])]),processDefinitionVersion:o(({row:a})=>[e(j,{theme:"primary",variant:"light"},{default:o(()=>[r("v"+Q(a.processDefinitionVersion),1)]),_:2},1024)]),_:1},8,["data","columns","loading","pagination","header-affixed-top"]),e(ee,{visible:_.value,"onUpdate:visible":i[2]||(i[2]=a=>_.value=a),"row-data":y.value,type:"diagram"},null,8,["visible","row-data"])])],2)}}});export{we as default};
