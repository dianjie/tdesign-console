import{d as E,aC as H,f as v,i as j,l as G,r as l,as as J,o as u,c as d,a as t,w as a,b as s,q as r,e as P,W as b,t as Q,s as X,at as Y}from"./index-CqGaQ7t4.js";import{t as Z}from"./work-EOGau8jX.js";import{_ as ee}from"./index.vue_vue_type_script_setup_true_lang-ojmq6q2F.js";import{u as te}from"./useSetting-CnYQd1RY.js";import{u as oe}from"./useDesign-CbWcZHFZ.js";import{u as ae}from"./useRequset-Bj5fiv5N.js";import{g as ne,f as x}from"./flowHelper-BpDILVBW.js";import{u as se}from"./index-BidCcHov.js";import"./flow-DzSZmebQ.js";const le=[{colKey:"serial-number",title:"序号",width:80,align:"center",fixed:"left"},{title:"流程分类",colKey:"categoryName"},{title:"流程名称",colKey:"processDefinitionName"},{title:"当前步骤",colKey:"taskName"},{title:"流程版本",colKey:"processDefinitionVersion"},{title:"申请时间",colKey:"createTime"},{fixed:"right",width:200,colKey:"op",title:"操作",align:"center"}],ie={class:"table-wrapper"},re=["onClick"],ce=["onClick"],ue=["onClick"],we=E({__name:"todo",setup(de){const{tableVar:N}=oe(),{getTableHeaderAffixedTop:$,getLayoutContainer:F}=te(),S={category:"",processDefinitionName:""},p=H(),i=v({...S}),I=p.getFlowDict,{fetchData:K,data:R,pagination:m,dataLoading:L}=ae(Z,i.value,Y),y=()=>{K({...i.value,category:ne(i.value.category)})};j(()=>{y()});const f=se(()=>{y()},300),T=o=>{m.value={...m.value,current:o.current||1,pageSize:o.pageSize},f()},_=v(!1),h=v({}),B=({row:o})=>{h.value=o,_.value=!0},w=G(),U=({row:o})=>{w.push({path:`/work/process/${x(p.getFlowRoutes,o.category)}/handle/${o.taskId}/${o.processInstanceId}/${o.businessId}`})},z=({row:o})=>{w.push({path:`/work/process/${x(p.getFlowRoutes,o.category)}/detail/${o.processInstanceId}/${o.businessId}`})};return(o,e)=>{const q=l("t-select"),k=l("t-form-item"),c=l("t-col"),M=l("t-input"),D=l("t-row"),C=l("t-button"),O=l("t-form"),W=l("t-tag"),A=l("t-table"),g=J("auth");return u(),d("div",{class:X(s(N))},[t(O,{ref:"form",data:i.value,"label-width":80,colon:"",style:{marginBottom:"8px"},onReset:s(f),onSubmit:s(f)},{default:a(()=>[t(D,null,{default:a(()=>[t(c,{span:10},{default:a(()=>[t(D,{gutter:[16,24]},{default:a(()=>[t(c,{span:4},{default:a(()=>[t(k,{label:"流程分类",name:"category"},{default:a(()=>[t(q,{modelValue:i.value.category,"onUpdate:modelValue":e[0]||(e[0]=n=>i.value.category=n),options:s(I),keys:{value:"dictKey",label:"dictValue"},clearable:"",placeholder:"请选择流程分类"},null,8,["modelValue","options"])]),_:1})]),_:1}),t(c,{span:4},{default:a(()=>[t(k,{label:"流程名称",name:"processDefinitionName"},{default:a(()=>[t(M,{modelValue:i.value.processDefinitionName,"onUpdate:modelValue":e[1]||(e[1]=n=>i.value.processDefinitionName=n),clearable:"",placeholder:"请输入流程名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(c,{span:2,class:"operation-wrapper"},{default:a(()=>[t(C,{theme:"primary",type:"submit",style:{marginLeft:"8px"}},{default:a(()=>e[3]||(e[3]=[r(" 查询 ")])),_:1}),t(C,{type:"reset",variant:"base",theme:"default"},{default:a(()=>e[4]||(e[4]=[r(" 重置 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data","onReset","onSubmit"]),P("div",ie,[t(A,{data:s(R),columns:s(le),hover:!0,loading:s(L),pagination:s(m),"header-affixed-top":{offsetTop:s($),container:s(F)},"vertical-align":"top","row-key":"id",bordered:"",stripe:"",onPageChange:T},{op:a(n=>[b((u(),d("a",{class:"t-button-link",onClick:V=>U(n)},e[5]||(e[5]=[r("处理")]),8,re)),[[g,"work_todo_handle"]]),b((u(),d("a",{class:"t-button-link",onClick:V=>z(n)},e[6]||(e[6]=[r("详情")]),8,ce)),[[g,"work_todo_detail"]]),b((u(),d("a",{class:"t-button-link",onClick:V=>B(n)},e[7]||(e[7]=[r("流程图")]),8,ue)),[[g,"work_todo_follow"]])]),processDefinitionVersion:a(({row:n})=>[t(W,{theme:"primary",variant:"light"},{default:a(()=>[r("v"+Q(n.processDefinitionVersion),1)]),_:2},1024)]),_:1},8,["data","columns","loading","pagination","header-affixed-top"]),t(ee,{visible:_.value,"onUpdate:visible":e[2]||(e[2]=n=>_.value=n),"row-data":h.value,type:"diagram"},null,8,["visible","row-data"])])],2)}}});export{we as default};
