import{d as O,aQ as j,r as v,a as G,c as J,e as s,aG as Q,f as c,i as d,l as e,w as o,j as n,p as i,n as W,J as D,t as P,q as X,aH as Y,_ as Z}from"./index.c2521a03.js";import{u as ee}from"./useDesign.9d0ca2bc.js";import{u as te}from"./useSetting.65510119.js";import{u as oe}from"./useRequset.5f7a0394.js";import{g as ae,f as B}from"./flowHelper.b35783d2.js";import{t as ne}from"./work.85922f1d.js";import{F as se}from"./index.515bd7c2.js";import{u as le}from"./index.d71d3bee.js";import"./flow.34ecd32e.js";const ue=[{colKey:"serial-number",title:"\u5E8F\u53F7",width:80,align:"center",fixed:"left"},{title:"\u6D41\u7A0B\u5206\u7C7B",colKey:"categoryName"},{title:"\u6D41\u7A0B\u540D\u79F0",colKey:"processDefinitionName"},{title:"\u5F53\u524D\u6B65\u9AA4",colKey:"taskName"},{title:"\u6D41\u7A0B\u7248\u672C",colKey:"processDefinitionVersion"},{title:"\u7533\u8BF7\u65F6\u95F4",colKey:"createTime"},{fixed:"right",width:200,colKey:"op",title:"\u64CD\u4F5C",align:"center"}],ie={class:"table-wrapper"},re=["onClick"],ce=["onClick"],de=["onClick"],pe=O({__name:"todo",setup(me){const{tableVar:V}=ee(),{getTableHeaderAffixedTop:x,getLayoutContainer:A}=te(),N={category:"",processDefinitionName:""},p=j(),l=v({...N}),S=p.getFlowDict,{fetchData:$,data:I,pagination:m,dataLoading:E}=oe(ne,l.value,Y),h=()=>{$({...l.value,category:ae(l.value.category)})};G(()=>{h()});const f=le(()=>{h()},300),K=t=>{m.value={...m.value,current:t.current||1,pageSize:t.pageSize},f()},_=v(!1),b=v({}),R=({row:t})=>{b.value=t,_.value=!0},y=J(),L=({row:t})=>{y.push({path:`/work/process/${B(p.getFlowRoutes,t.category)}/handle/${t.taskId}/${t.processInstanceId}/${t.businessId}`})},T=({row:t})=>{y.push({path:`/work/process/${B(p.getFlowRoutes,t.category)}/detail/${t.processInstanceId}/${t.businessId}`})};return(t,u)=>{const U=s("t-select"),w=s("t-form-item"),r=s("t-col"),z=s("t-input"),F=s("t-row"),C=s("t-button"),q=s("t-form"),H=s("t-tag"),M=s("t-table"),g=Q("auth");return c(),d("div",{class:X(n(V))},[e(q,{ref:"form",data:l.value,"label-width":80,colon:"",style:{marginBottom:"8px"},onReset:n(f),onSubmit:n(f)},{default:o(()=>[e(F,null,{default:o(()=>[e(r,{span:10},{default:o(()=>[e(F,{gutter:[16,24]},{default:o(()=>[e(r,{span:4},{default:o(()=>[e(w,{label:"\u6D41\u7A0B\u5206\u7C7B",name:"category"},{default:o(()=>[e(U,{modelValue:l.value.category,"onUpdate:modelValue":u[0]||(u[0]=a=>l.value.category=a),options:n(S),keys:{value:"dictKey",label:"dictValue"},clearable:"",placeholder:"\u8BF7\u9009\u62E9\u6D41\u7A0B\u5206\u7C7B"},null,8,["modelValue","options"])]),_:1})]),_:1}),e(r,{span:4},{default:o(()=>[e(w,{label:"\u6D41\u7A0B\u540D\u79F0",name:"processDefinitionName"},{default:o(()=>[e(z,{modelValue:l.value.processDefinitionName,"onUpdate:modelValue":u[1]||(u[1]=a=>l.value.processDefinitionName=a),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6D41\u7A0B\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(r,{span:2,class:"operation-wrapper"},{default:o(()=>[e(C,{theme:"primary",type:"submit",style:{marginLeft:"8px"}},{default:o(()=>[i(" \u67E5\u8BE2 ")]),_:1}),e(C,{type:"reset",variant:"base",theme:"default"},{default:o(()=>[i(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1})]),_:1},8,["data","onReset","onSubmit"]),W("div",ie,[e(M,{data:n(I),columns:n(ue),hover:!0,loading:n(E),pagination:n(m),"header-affixed-top":{offsetTop:n(x),container:n(A)},"vertical-align":"top","row-key":"id",bordered:"",stripe:"",onPageChange:K},{op:o(a=>[D((c(),d("a",{class:"t-button-link",onClick:k=>L(a)},[i("\u5904\u7406")],8,re)),[[g,"work_todo_handle"]]),D((c(),d("a",{class:"t-button-link",onClick:k=>T(a)},[i("\u8BE6\u60C5")],8,ce)),[[g,"work_todo_detail"]]),D((c(),d("a",{class:"t-button-link",onClick:k=>R(a)},[i("\u6D41\u7A0B\u56FE")],8,de)),[[g,"work_todo_follow"]])]),processDefinitionVersion:o(({row:a})=>[e(H,{theme:"primary",variant:"light"},{default:o(()=>[i("v"+P(a.processDefinitionVersion),1)]),_:2},1024)]),_:1},8,["data","columns","loading","pagination","header-affixed-top"]),e(se,{visible:_.value,"onUpdate:visible":u[2]||(u[2]=a=>_.value=a),"row-data":b.value,type:"diagram"},null,8,["visible","row-data"])])],2)}}}),Fe=Z(pe,[["__file","D:/Study/tdesign-console/src/views/work/todo.vue"]]);export{Fe as default};
